{"version":3,"file":"0.867abc5fc59749debf2d.hot-update.js","sources":["/Users/jorgeivansandovalhoyos/video-player/packages/server/src/schema.ts","/Users/jorgeivansandovalhoyos/video-player/packages/server/src/server.ts"],"sourcesContent":["import { makeExecutableSchema } from 'graphql-tools';\nimport resolvers from './resolvers';\nimport * as typeDefs from './schema.graphql';\n\nconst executableSchema = makeExecutableSchema({\n  typeDefs,\n  // tslint:disable-next-line\n  resolvers\n});\n\nexport default executableSchema;\n\n\n\n// WEBPACK FOOTER //\n// ./src/schema.ts","import { graphiqlExpress, graphqlExpress } from 'apollo-server-express';\nimport * as bodyParser from 'body-parser';\nimport * as cors from 'cors';\nimport * as express from 'express';\n\nimport schema from './schema';\n\nimport { execute, subscribe } from 'graphql';\nimport { createServer, Server } from 'http';\nimport { SubscriptionServer } from 'subscriptions-transport-ws';\n\nexport default async (port: number): Promise<Server> => {\n  const app = express();\n\n  const server: Server = createServer(app);\n\n  app.use('*', cors({ origin: 'http://localhost:3000' }));\n\n  app.use(\n    '/graphql',\n    bodyParser.json(),\n    graphqlExpress({\n      schema\n    })\n  );\n\n  if (module.hot) {\n    app.use(\n      '/graphiql',\n      graphiqlExpress({\n        endpointURL: '/graphql',\n        subscriptionsEndpoint: `ws://localhost:${port}/subscriptions`,\n        // tslint:disable-next-line\n        query:\n          '# Welcome to your own GraphQL server!\\n#\\n' +\n          '# Press Play button above to execute GraphQL query\\n#\\n' +\n          '# You can start editing source code and see results immediately\\n\\n' +\n          'query hello($subject:String) {\\n  hello(subject: $subject)\\n}\\n\\n' +\n          'query Clips {\\n  clips{id, name, start, end} \\n}\\n\\n' +\n          'mutation DeleteClip($id:ID!) {\\n  deleteClip(id:$id) \\n}\\n\\n' +\n          'mutation SaveClip($id:ID, $name: String, $start: Int, $end: Int) {\\n' +\n          '  saveClip(id:$id, name:$name, start:$start, end:$end) {\\n' +\n          '    id, name, start, end\\n' +\n          '  }\\n' +\n          '}\\n',\n        variables: { subject: 'World' }\n      })\n    );\n  }\n\n  return new Promise<Server>(resolve => {\n    server.listen(port, () => {\n      // tslint:disable-next-line\n      new SubscriptionServer(\n        {\n          execute,\n          subscribe,\n          // tslint:disable-next-line\n          schema\n        },\n        {\n          server,\n          // tslint:disable-next-line\n          path: '/subscriptions'\n        }\n      );\n      resolve(server);\n    });\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/server.ts"],"mappings":";;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;;;AACA;AAEA;AAEA;AAEA;AAIA;AACA;AAGA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;AACA;;;;;A","sourceRoot":""}